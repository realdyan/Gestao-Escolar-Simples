export struct EscolaRow {
    id: int,
    nome: string,
    email: string,
    telefone: string,
    endereco: string,
    website: string,
}

export component EscolasScreen inherits Rectangle {
    in-out property <string> modo: "listar";
    in-out property <[EscolaRow]> dados: [];
    
    // Formul√°rio
    in-out property <int> form_id: -1;
    in-out property <string> form_nome: "";
    in-out property <string> form_email: "";
    in-out property <string> form_telefone: "";
    in-out property <string> form_endereco: "";
    in-out property <string> form_website: "";
    
    // Callbacks
    callback atualizar();
    callback salvar();
    callback editar(int);
    callback deletar(int);
    
    background: #f5f5f5;
    
    VerticalLayout {
        padding: 20px;
        spacing: 15px;
        
        // HEADER
        HorizontalLayout {
            spacing: 10px;
            Text { text: "üè´ Gest√£o de Escolas"; font-size: 22px; font-weight: 700; color: #2c3e50; }
            Rectangle { }
            Rectangle {
                width: 120px; height: 35px;
                background: btn_novo.has-hover ? #27ae60 : #2ecc71;
                border-radius: 5px;
                btn_novo := TouchArea {
                    clicked => {
                        modo = "cadastrar";
                        form_id = -1;
                        form_nome = ""; form_email = ""; form_telefone = ""; form_endereco = ""; form_website = "";
                    }
                }
                Text { text: "‚ûï Novo"; color: white; font-weight: 600; vertical-alignment: center; horizontal-alignment: center; }
            }
            Rectangle {
                width: 130px; height: 35px;
                background: btn_atuali.has-hover ? #2980b9 : #3498db;
                border-radius: 5px;
                btn_atuali := TouchArea { clicked => { atualizar(); } }
                Text { text: "üîÑ Atualizar"; color: white; font-weight: 600; vertical-alignment: center; horizontal-alignment: center; }
            }
        }
        
        Rectangle { height: 1px; background: #bdc3c7; }
        
        // LISTAGEM
        if modo == "listar": Rectangle {
            background: white;
            border-radius: 8px;
            
            VerticalLayout {
                padding: 20px;
                spacing: 10px;
                
                Text { text: "Total: " + dados.length; font-size: 16px; font-weight: 600; color: #7f8c8d; }
                
                Rectangle {
                    height: 40px;
                    background: #ecf0f1;
                    border-radius: 5px;
                    HorizontalLayout {
                        padding: 10px;
                        Text { text: "ID"; font-weight: 700; width: 50px; }
                        Text { text: "Nome"; font-weight: 700; width: 250px; }
                        Text { text: "Email"; font-weight: 700; width: 200px; }
                        Text { text: "Telefone"; font-weight: 700; width: 120px; }
                        Text { text: "A√ß√µes"; font-weight: 700; }
                    }
                }
                
                for item in dados: Rectangle {
                    height: 45px;
                    background: #ffffff;
                    border-width: 1px;
                    border-color: #ecf0f1;
                    border-radius: 5px;
                    
                    HorizontalLayout {
                        padding: 10px;
                        Text { text: item.id; width: 50px; color: #7f8c8d; }
                        Text { text: item.nome; width: 250px; color: #2c3e50; font-weight: 600; }
                        Text { text: item.email; width: 200px; color: #34495e; }
                        Text { text: item.telefone; width: 120px; color: #34495e; }
                        
                        HorizontalLayout {
                            spacing: 5px;
                            Rectangle {
                                width: 70px; height: 28px;
                                background: be.has-hover ? #f39c12 : #f1c40f;
                                border-radius: 3px;
                                be := TouchArea { clicked => { editar(item.id); } }
                                Text { text: "‚úèÔ∏è Editar"; font-size: 12px; vertical-alignment: center; horizontal-alignment: center; }
                            }
                            Rectangle {
                                width: 80px; height: 28px;
                                background: bd.has-hover ? #c0392b : #e74c3c;
                                border-radius: 3px;
                                bd := TouchArea { clicked => { deletar(item.id); } }
                                Text { text: "üóëÔ∏è Deletar"; color: white; font-size: 12px; vertical-alignment: center; horizontal-alignment: center; }
                            }
                        }
                    }
                }
            }
        }
        
        // FORMUL√ÅRIO
        if modo == "cadastrar" || modo == "editar": Rectangle {
            background: white;
            border-radius: 8px;
            
            VerticalLayout {
                padding: 20px;
                spacing: 15px;
                
                Text {
                    text: modo == "cadastrar" ? "‚ûï Cadastrar Nova Escola" : "‚úèÔ∏è Editar Escola";
                    font-size: 18px; font-weight: 600; color: #2c3e50;
                }
                
                GridLayout {
                    spacing: 15px;
                    Row {
                        Text { text: "Nome:"; color: #2c3e50; font-weight: 600; }
                        Rectangle {
                            height: 40px; background: white; border-width: 1px; border-color: #bdc3c7; border-radius: 5px;
                            HorizontalLayout { padding-left: 10px; padding-right: 10px; TextInput { text <=> form_nome; font-size: 14px; vertical-alignment: center; color: #000000; } }
                        }
                    }
                    Row {
                        Text { text: "Email:"; color: #2c3e50; font-weight: 600; }
                        Rectangle {
                            height: 40px; background: white; border-width: 1px; border-color: #bdc3c7; border-radius: 5px;
                            HorizontalLayout { padding-left: 10px; padding-right: 10px; TextInput { text <=> form_email; font-size: 14px; vertical-alignment: center; color: #000000; } }
                        }
                    }
                    Row {
                        Text { text: "Telefone:"; color: #2c3e50; font-weight: 600; }
                        Rectangle {
                            height: 40px; background: white; border-width: 1px; border-color: #bdc3c7; border-radius: 5px;
                            HorizontalLayout { padding-left: 10px; padding-right: 10px; TextInput { text <=> form_telefone; font-size: 14px; vertical-alignment: center; color: #000000; } }
                        }
                    }
                    Row {
                        Text { text: "Endere√ßo:"; color: #2c3e50; font-weight: 600; }
                        Rectangle {
                            height: 40px; background: white; border-width: 1px; border-color: #bdc3c7; border-radius: 5px;
                            HorizontalLayout { padding-left: 10px; padding-right: 10px; TextInput { text <=> form_endereco; font-size: 14px; vertical-alignment: center; color: #000000; } }
                        }
                    }
                    Row {
                        Text { text: "Website:"; color: #2c3e50; font-weight: 600; }
                        Rectangle {
                            height: 40px; background: white; border-width: 1px; border-color: #bdc3c7; border-radius: 5px;
                            HorizontalLayout { padding-left: 10px; padding-right: 10px; TextInput { text <=> form_website; font-size: 14px; vertical-alignment: center; color: #000000; } }
                        }
                    }
                }
                
                HorizontalLayout {
                    spacing: 10px;
                    Rectangle {
                        width: 120px; height: 40px;
                        background: bs.has-hover ? #27ae60 : #2ecc71;
                        border-radius: 5px;
                        bs := TouchArea { clicked => { salvar(); } }
                        Text { text: "üíæ Salvar"; color: white; font-weight: 600; vertical-alignment: center; horizontal-alignment: center; }
                    }
                    Rectangle {
                        width: 120px; height: 40px;
                        background: bc.has-hover ? #95a5a6 : #bdc3c7;
                        border-radius: 5px;
                        bc := TouchArea { clicked => { modo = "listar"; } }
                        Text { text: "‚ùå Cancelar"; color: #2c3e50; font-weight: 600; vertical-alignment: center; horizontal-alignment: center; }
                    }
                }
            }
        }
    }
}